*Start Part 6*

*2:52:43
this is the sixth part in a video series dedicated to building a shopping cart application using blazor webassembly on .net 6. so we have created three workflows let's recap the first workflow involves retrieving products data from the database and displaying the products data to the user in an aesthetically pleasing style the second workflow involves retrieving details for an individual product and displaying the relevant details in an aesthetically pleasing style to the user the third workflow involves the user adding a product to the user's shopping cart and the user being navigated to a screen that displays a list of products contained within the user's shopping cart in this video we'll create the workflow that involves a user removing a product from the user's shopping cart let's get started let's start by implementing the server side code let's go to our shoponline.api project and open the shopping cart repository.cs*

*2:54:08
file let's implement the code logic for the delete item method so we can use the id value that will be passed into this method to find the entity that we wish to delete from the cart items database table we are using the find async method to find the relevant entity using the primary key field which is the id field if we find the relevant entity if the item returned from the find async method is not null we can use the remove method to remove the relevant entity from the cart items database table then we mustn't forget to call the save changes async method to commit the relevant change to our database in order to make this delete functionality available to calling client code let's create an appropriate endpoint within our web api component so let's go to the shopping cart controller class and create an appropriate action method that will call the relevant delete item method that we have just implemented in the shopping cart repository class let's decorate our delete item action method with an attribute that declares that this action method corresponds to the http delete verb*

*2:56:15
so far in the development of our application we have created endpoints that correspond to both the get and post http verbs we are about to implement the logic for an endpoint that corresponds to the delete http verb let's declare the relevant root template information for our action method by passing an appropriate string argument to the http delete attribute this information includes a definition for the id that needs to be part of the uri universal resource identifier pertaining to the entity that a client wishes to delete so we are essentially enabling a calling client to delete a specific resource from the system let's create a try catch block a simple way to create the relevant code for this is to type try followed by pressing the tab key twice let's call the delete item method on the shopping cart repository object that will be injected into the constructor of this controller class at runtime if the entity that the client wishes to delete cannot be found we want code to execute that returns a http response code of not found 404 to the client*

*2:57:39
the information that we want transferred across the network for the relevant entity that the client wishes to delete is of type can't item dto and not the type cart item that is returned from the delete item method called on the shopping cart repository object in the previous part of this video series part 5 we implemented an extension method overload named convert to dto within the dto conversions class this extension method can be called on any object of type cart item before we appropriately call the convert to dto extension method we must retrieve the relevant product entity from the database so let's write the code to achieve this then let's call the convert to dto method on the object of type cart item returned from the shopping cart repository classes delete item method to convert the relevant object of type cart item to an object of type cart item dto then let's write code to return a http response code of ok200 to the client along with the relevant object of type cart item dto*

*2:58:54
let's complete this method by writing code that executes if for some reason an exception is thrown during the execution of the code logic within the delete item action method let's go to our blazer component so let's go to the shoponline.web project let's add an appropriate new method definition to the i shopping cart service interface named delete item let's open the shopping cart service class and implement the code logic for the delete item method if the http response code returned from the server falls within the success range we want code to execute that returns an object of type can't item dto to the calling code if the call to the server is not successful we want null to be returned to the calling code let's open the shopping cart base class within the pages folder let's implement code for a method that handles a button click event so this method will be called when a let's implement code for a method that handles a button click event so this method will be called when a*

*3:01:32
user clicks a delete button that we'll create in a bit in the shoppingcart.razer file let's appropriately call the delete item method on the shopping cart service object that will be injected into our razor component at runtime so this code will call the appropriate action method on the server side that will delete the relevant entity cart item from our database so we want the results of this deletion operation to be reflected on the user interface which means we need the shopping cart razor component to re-render once the deletion operation has completed successfully we could call the appropriate get items method and retrieve all the relevant shopping cart items that are currently saved to our database for the relevant user and assign the results to the shopping cart items property user and assign the results to the shopping cart items property however we can implement code for a solution that will be more performant for this purpose than the solution that i've just expressed i.e that involves an additional call to the server-side code we can reflect the results of a deletion*

*3:03:06
operation on the ui by simply deleting the relevant cart item object from the client side collection of card items referenced by our shopping cart items property by deleting the relevant item from the client side collection we are avoiding a trip as it were to the server side this could result in a significant performance benefit so let's create a private method responsible for removing the relevant item from the client side shopping cart items collection we first need a variable that references the object within the shopping cart items collection that we wish to delete so let's create another private method that contains code for returning a specific object within the shopping cart items collection let's then call our new private method to return the object that we wish to delete from the shopping cart items collection to our remove card item method we can then implement code to delete the relevant item from the relevant client-side shopping cart items collection but there is a problem with this at the moment our client site collection stored within the shopping cart items property is currently of type i enumerable the i enumerable type is fine for when we need to traverse through the items in*

*3:04:52
the relevant collection but we don't currently have an easy way available to us to remove an item from the relevant client-side collection one solution to this problem is that we can change the type of our client side collection to type list we must also appropriately change the return type of the delete item method definition in the i shopping cart service interface and of course we must also appropriately change the return type for the implementation of this method in the shopping cart service class let's go back to the shopping cart base class and use the remove method on the shopping cart items collection let's go back to the shopping cart base class and use the remove method on the shopping cart items collection let's appropriately call our remove cart item method from within the delete cart item underscore click event handler method let's create the delete button within the shoppingcart.razer file*

*3:07:52
let's use blazers at on click syntax to ensure that our delete cart item underscore click functionality is triggered when the user clicks our new button let's run the code and test our method great okay so i don't like this empty screen displayed to the user here when the user no longer has any cart items saved to the user's shopping cart so let's ensure that status information is outputted to the user for the case where the user's shopping cart is empty so we can do this by using the count method so if the count method returns a value greater than zero we can output the data contained within the shopping cart items property as well as the relevant shopping cart summary information else let's output a basic message to the user informing the user that the user's shopping cart is empty let's run the code great so i think rather than display the text remove on the relevant button i think the standard trash icon would look better let's use font awesome for this purpose i'm going to use an appropriate cdn cloud delivery network link to reference the relevant font awesome css file so if we go to this website we can copy the relevant link here and we can then paste it into our index.html file in order to include font awesome icons within our application*

*3:12:55
we are now able to reference the font awesome trash icon like this to display the trash icon on our delete button excellent i hope you've enjoyed this video i look forward to presenting the next video in this series where we'll continue to develop our shopping cart application we are going to implement the update quantity functionality in the next video*

*End 6th Part*
