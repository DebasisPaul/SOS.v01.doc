# üôå üëç part-1

*Blazor Web Assembly is a `Single page app framework` for building `interective` `client side` `web app`s with `dot net`. It uses `open Web standard` without `plugin or recompiling code` into other languages. This Course will teach you how to use `balzor web assembly` & `web api` on .Net 6 . We will build step by step a `shopping Cart Application`. We also provide the guide on how to `intigrate a payment gateway` into our `blazor web Assembly` component so that a user able to pay for products through our application using a `debit or credit card` or in the `paypal account`.*

*please join us  as we built the very basic `shopping Cart Application` using `blazor web assembly`. A few of the significant technology we'll use for building our application are as follow. The latest version `of visual studio`, which is `visual studio 2022`. and we'll use the community edition for windows. .net 7 which is at the time of creating this project the latest version of dotnet. It was released in June of 2022 Pre 5. Sql Server 2019, Blazor Web assembly, we'll use bootstrap version 5 for layout & styling purposes. We'll build the `restful MVC Web Api project` for handling database related functionality & returning relavent data from the `server` to our client side blazor application. All technology is used for the development of this application can be downloaded free of charge. Please see below in the description the location of where u're able to download the relavent technology is for free. We're going to integrate a payment gateway powered by paypal into our application. So that a user can use their paypal account or a valid debit or credit card to pay for the items that all purchase through our online shopping cart application.*

| Logo | Technologies | 
| ----------- | ----------- |
|<img src="https://th.bing.com/th/id/OIP.V-EXykC2eWn7fHqPslAl2wHaHX?pid=ImgDet&rs=1" style="width:50px;height:50px;">|[Visual Studio 2022 version 17.2.3 (Community Preview)](https://visualstudio.microsoft.com/vs/preview/) `https://docs.microsoft.com/en-us/visualstudio/releases/2022/release-notes`|
|<img src="https://th.bing.com/th/id/R.3d6504d22dce42b5f9c6cdd19c4f5c0b?rik=l4CnmJIt2wpQlw&pid=ImgRaw&r=0" style="width:50px;height:50px;">|[.Net 6 LTS](https://devblogs.microsoft.com/dotnet/dotnet-7-generic-math/)|
|<img src="https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Foptimizdba.com%2Fwp-content%2Fuploads%2F2018%2F07%2F1499955337microsoft-sql-server-logo-png-2.png&f=1&nofb=1" style="width:50px;height:50px;">|[SQL Server 2022 (16.x) Preview community technology preview (CTP) 2.0.](https://docs.microsoft.com/en-us/sql/sql-server/what-s-new-in-sql-server-2022?view=sql-server-ver16)||
|<img src="https://www.rlogical.com/wp-content/uploads/2020/10/Blazor.png" style="width:50px;height:50px;">|[Blazor WebAssembly](https://docs.microsoft.com/en-us/aspnet/core/blazor/?view=aspnetcore-6.0) |
|<img src="https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.drupal.org%2Ffiles%2Fproject-images%2Fbootstrap-stack.png&f=1&nofb=1" style="width:50px;height:50px;">|[Bootstrap v5.2](https://getbootstrap.com/) for layout & styling purposes.|
| <img src="https://th.bing.com/th/id/OIP.v3itvY2BcYOwgZJNGfRFJwHaHa?pid=ImgDet&rs=1" style="width:50px;height:50px;">|[ASP.NET 4.x RESTful MVC Web API 2](https://docs.microsoft.com/en-us/aspnet/web-api/)  for handling database related funtionality & returning relavent data from the server to our client side blazor application.|
|<img src="https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fyt3.ggpht.com%2Fa%2FAATXAJzzdUWapX7hLx_ow3cGEPW45UcgalrAXcJ5E9XU1w%3Ds900-c-k-c0xffffffff-no-rj-mo&f=1&nofb=1" style="width:50px;height:50px;">|[PayPal Payment Gateway](https://developer.paypal.com/api/nvp-soap/payflow/payflow-gateway/) so that a user can use their paypal account or a valid debit or credit card to pay for the items that all purchased through our online shopping cart application.|
|<img src="https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fyt3.ggpht.com%2Fa%2FAGF-l791ySSDFwSHTYVjI0BMuuyqlFmiMutGcvcYcA%3Ds900-c-k-c0xffffffff-no-rj-mo&f=1&nofb=1" style="width:50px;height:50px;">| [POSTMAN](https://www.postman.com/) To test web api funtionality.|
|<img src="https://th.bing.com/th/id/R.01e6f07f9add7f088c61cc86f3b8c9b2?rik=tleE7%2fpICszi%2fw&pid=ImgRaw&r=0" style="width:50px;height:50px;">|[Build database Using ef7 Pre5 Code First Migration](https://docs.microsoft.com/en-us/aspnet/entity-framework)|

*Blazor is a relatively new feature of ASP.NET. It offers two `hosting model`. A 'server side hosting model` &  a 'client side hosting model'. We are going to use the 'client side hosting model' for the development of our shopping cart application. The significanse of this `hosting model` is that the C# code runs directly within our `browsers`. What makes this possible is a technology named `Web Assembly`. In recent years the creation of `SPA applications` or `single page applications` have become very popular as `web solutions`. Recently `Javascript frameworks like Angular or React` have been the avilable choices for the creation of `spa applications`. With Blazor we are now able to create our `single page applications using C#`. We don't necessaryly need to depend on  javascript for the creation of our interective UI Code. We can create this code using `C#`. In this appliaction however the `payment gateway` provided by `paypal` is coded in `javascript`. So we will use blazor into our probality funtionality with javascript to interect with the relavent javascript paypal code.*

*So lets get started. Let's create our blazor solutions. Let's fire up visual studio 2022. Select create new project. Le's choose the appropriate project template. Blazor Web Assembly App. Let's name our solution `ShopOnlineSolution`. Let's name the blazor project ShopOnline.Web. great. Lets add a new project to our solutions where we'll create out restful web api funtionality. So lets ensure that we choose the correct project template. Lets name our project ShopOnline.Api. Notice that for the authentication type we're choosing none. We are not going to implement membership funtionality. which ofcourse include login & registration funtionality. We're focus purely on the Shopping Cart Funtionality. We want to run our application on latest version of dot net, .net 6. note that we're enable OpenApi support. By doing this the `Swashbuckle` NuGet Package will be automatically installed & the appropriate swagger middleware will be automatically configured appropiately within our project. One of the advatages of this is when we run our Web Api project interectively we'll be able to test our web Api code through our browsers even before we've developed any front-end code. So the basic UI will automatically be created for this purpose for us. When we run our application interectevly we'll be able  to test each of our action methods through the relavent automatically created web based UI. Note that u can also use a tool like postman to test a web api funtionality. I going to be using postman during the develop[ment of this application.*

*We are going to build our database using code first migrations & entity framework core. Migration allow us to evolve our database without using data or database object. So by using plain all C# classes we can build the database entites that we wish to include within our Shopping Cart Application. Once we've created relavent entity related C# classes we're look at an entity relationship diagram that represent our shopping cart application database design. Lets add a folder name Entities to our project. This is where the classes that will represant our database entities will reside. So lets create a class name cart to represant the cart entity. so lets add to public property to this class id as integer & userid as integer. lets add a new class name cartitem. this entity represents an item that has been added to the user shopping cart. So lets add an integer property name id, lets add an integer property name cartid. This property represents a foreign key field. & is used to join the cart entity to the cart item entity. so the cart entity has a one to many relationship with the cartitem entity. this is to note that many cartitem can be included with in one particular shopping cart. Lets includean integer property name ProductId. lastly lets include ainteger property name Qty represanting a quantity or number of a particular product that may be included within a particular shopping cart. lets create a new class represant the product entity. the product entity will have a one to many relationship with the cart item entity. This to note that a product can be included many types across many different shopping carts. lets add an integer property name Id. Lets add a string property name name. lets add a string property name Description. lets add a string property name ImageURL. Lets create a property of type decimal price named price. lets create a property of type integer named Qty. Lastly let's add a property of type integer name CategoryId. The CategoryId property represents foreign key from the ProductCategory Entity. The code for which we're about to implement. So let's create a class named productCategory. This entity has a one to many relationship with the product entity. Let's add a public property name Id. Note that when a property is named Id by convention entity framework core will designate the Id Property as representative of the relavant ettity's primary key. Let's add a property of type string and name this property Name And lastly let's create a class to represent out user entity which of course represents a user of our application. Note that i've included this entity as a temporary substitute for a membership facility like for exemple microsoft identity So that we can focus on theshopping cart workflows and not be distracted by the membership functionality. So let's add an integer property named Id. Let's add a string property named UserName. So If we look at the entity relationship diagram [Visit Here](https://lucid.app/lucidchart/969fa12e-1cb2-49bf-9e2d-3a89accc11ab/edit?viewport_loc=-65%2C-11%2C1707%2C872%2C0_0&invitationId=inv_534ffb26-27c6-4037-99ad-da8d6e9f0aa2#) We can see the relationship s between our entities.*

*The cart entity has a one to many relationship with the CartItem entity. The Product entity has a OneToMany relationship with the CartItem Entity.The product category entity has a OneToMany relatioship with the Product Entity. The User Entity has OneToOne relationship with the Cart entity. So the basically means each user can only have one Shopping Cart Within our application. If you look at the Sql Server management studio that is installed on my local machine. You can see that i've already generated a database through ef7. This was done when i was developing the protottype for this application. So we're now going to use ef7 to generate a database for our Shgopping Cart Application. The classes we've just created representing our Entities will be used by ef7 to generate the corresponding database tables within a database that ef7 will create for us. In order to generate our database with the relevent tables through visual sturio lets install two nuget packages.*

*Using  ef7 to generate a database for our shopping cart application. The classes that we've just crated representing our entities will be used by ef7 to generate the corresponding database table within the database that ef7 create for us. In order to generate our database with the relavent tables through Visual Studio Let's Install two Nuget Packages, `EntityFrameworkCore.SqlServer` `EntityFrameworkCore.Tools` for running migrations within visual studio. The reason for installing `EntityFrameworkCore.Tools` this package is because we want to run our migration with in the visual studio as supposed to using .Net CLI for this purpose. We can use different commands when running migration commands using the .Net CLI. As supposed to the command we run when using Visual Studio. Configuring Connection String in order to connect the application with the database that we wish to create using ef7 code first migrations.

*Create Database Context Class. So in order to make this class represant our ef7 databse context we need to implement code so that our `ShopOnlineDbContext` Class inherits from ef7 DbContext class. An red squigly line under `DbContext` this is because we've an important `Microsoft.EntityFramewokCore` Namespace. An easy way to include the appropriate using directive through visual studio is to press `Ctr+Period` & then select the appropriate menu item from the menu that is presented to us through Visual Studio. Let's Create the Constructor for our `ShopOnlineDbContext` Class. We must add a parameter to to the constructor that we've just generated. The parameter is name `Options` & is of the generic type `DbContextOptions` which has the data type `ShopOnlineDbContext` Passed as an argument to it. We can then write code to pass the argument that will be passed to our `ShopOnlineDbContext` Class Constructor to the base class from which Inherit IE. the DbContext class. Now because We want to focus on the shopping cart workflow at the stage & don't want us to distructed by the implementation of administrative CRUD operation functionality. *An Easy way to automaically generate a Constructor within visual studio is type `ctor` & then press the tab key twice. Then in order to indicate to .Net that we want an object of type ShopOnlineDbContext to be injected into this constructor only need to do is difine an parameter with in our constructor of type ShopOnlineDbContext.* 

*`OnModelCreating Method Overriding`  We are going to seed our database with certain data. This is data that we already prepared. So we're not going to include Create Read Update & delete Funtionality regarding the creation & maintenance of product data. At the stage we are going to seed our database with product related data. We're going to seed our database with the relavent data so that we can move directly to the creation of our shopping cart functionality. So in order to seed database appropriately we can override a method that exist  within the DbContext based class. This method is named `OnModelCreating` An easy way to generate the relavent override code for this method through visual studio is to type in the word `override` & then press the space bar. We can Insulate The `OnModelCreating` item. From the drop down list presented in us with in visual studio.*

*`Using Entity Framework Core DbSet Generic Type` So for each of our entities we need to appropriately include a public property of type `DbSet` with in our `ShopOnlineDbContext` Class.*

*`Generating Migration Using ef7` Open NuGet Package Manager Console Window. Follow with this Command `Add-Migration InitiaCreate` ShopOnline Api project Set as Startup Project. By generating this migration class this code generate our database & the relavent table. This method also contain code that seeds the relavent database table with the data that prepared prair to create in this project.*

*`To run migration type update-database Command in Nuget PM console Window.` Check SSMS 19 Prev 2. We can see that the ShopOnline Database has been Created. The database table have been appropriately created based on the entities we created using C# classes. The relavent database tables have been seeded with the data created from the code we included with in the `OnModelCreating` method. Which was search with in the `ShopOnlineDbContext` class. The data with which we've seeded our database contains product & User Information. This is been done. so that we can focus on the shopping cart functionality & not worried  at this stage about implementing code `Creat Read Update & Delete` Functionality regrading products sold by our frictional online store.*

*`Running Migrations Notes:` if u have one migration or more than one migration & not happy with the changes made to the database u can undo the changes made by running this command `update-database 0` The number Zero is a special case that means before the first migration & causes the effects of all migration to be rolled back. To Remove migration run this command `remove-migration` if you Upadate a database with multiple migrations Like `Migration1 or Migration2 or Migration3 or Migration4 or Migration5`. if u wish to rollback the changes to before a particular migration was run you can Rollback your changes to that particular state by running the migration that was run directly before the migration that back contain the changes you wish to roll back `update-database Migration2`*

*[SPA (Single-page application)](https://developer.mozilla.org/en-US/docs/Glossary/SPA) [The web and web standards](https://developer.mozilla.org/en-US/docs/Learn/Getting_started_with_the_web/The_web_and_web_standards) [How to Integrate a Payment Gateway Into a Website](https://www.wikihow.com/Integrate-a-Payment-Gateway-Into-a-Website) [Recompile](https://www.computerhope.com/jargon/r/recompile.htm) [Plugin](https://www.computerhope.com/jargon/p/plugin.htm) [PayPal](https://www.paypal.com/us/sig) [Debit Card vs. Credit Card: What's the Difference?](https://www.investopedia.com/ask/answers/050415/what-are-differences-between-debit-cards-and-credit-cards.asp) [.NET documentation](https://docs.microsoft.com/en-us/dotnet/) [Web APIs](https://developer.mozilla.org/en-US/docs/Web/API https://en.wikipedia.org/wiki/Web_API) [API](https://en.wikipedia.org/wiki/API)*

*[World Wide Web](https://en.wikipedia.org/wiki/World_Wide_Web) [Web3](https://en.wikipedia.org/wiki/Web3) [Web technology for developers](https://developer.mozilla.org/en-US/docs/web) [WebAssembly](https://webassembly.org/ https://developer.mozilla.org/en-US/docs/WebAssembly https://en.wikipedia.org/wiki/WebAssembly) [Blazor](https://dotnet.microsoft.com/en-us/apps/aspnet/web-apps/blazor https://docs.microsoft.com/en-us/aspnet/core/blazor/?view=aspnetcore-6.0 https://blazor-university.com/) [Common client-side web technologies](https://docs.microsoft.com/en-us/dotnet/architecture/modern-web-apps-azure/common-client-side-web-technologies) [What is Interactive App and Why It Matters for Your Business](https://www.visartech.com/blog/what-is-interactive-app-and-how-business-benefits/) [Client-side](https://en.wikipedia.org/wiki/Client-side)*

*[hosting model](https://docs.microsoft.com/en-us/aspnet/core/blazor/hosting-models?view=aspnetcore-6.0 https://docs.microsoft.com/en-us/dotnet/architecture/blazor-for-web-forms-developers/hosting-models) [server side](https://developer.mozilla.org/en-US/docs/Learn/Server-side/First_steps/Introduction) [Client Side vs. Server Side: What's the Difference?](https://www.indeed.com/career-advice/career-development/client-side-vs-server-side) [Client‚Äìserver model](https://en.wikipedia.org/wiki/Client%E2%80%93server_model) [Client-Server Overview](https://developer.mozilla.org/en-US/docs/Learn/Server-side/First_steps/Client-Server_overview) [C# documentation](https://docs.microsoft.com/en-us/dotnet/csharp/)*

*[Microsoft identity platform documentation](https://docs.microsoft.com/en-us/azure/active-directory/develop/) [Database Relationships](https://www.sqlshack.com/learn-sql-types-of-relations/ https://code.tutsplus.com/articles/sql-for-beginners-part-3-database-relationships--net-8561 https://www.tutorialsteacher.com/sqlserver/tables-relations) [Connection Strings](https://docs.microsoft.com/en-us/ef/core/miscellaneous/connection-strings)*

* [DbSet](https://docs.microsoft.com/en-us/dotnet/api/system.data.entity.dbset?view=entity-framework-6.2.0) 20.50 `Register ShopOnlineDbContext class for Dependency Injection` Lets open the relavent program.cs file. [Dependency injection in .NET](https://docs.microsoft.com/en-us/dotnet/core/extensions/dependency-injection) [Dependency injection in ASP.NET Core](https://docs.microsoft.com/en-us/aspnet/core/fundamentals/dependency-injection?view=aspnetcore-6.0) [DbContext Class](https://docs.microsoft.com/en-us/dotnet/api/system.data.entity.dbcontext?view=entity-framework-6.2.0, https://docs.microsoft.com/en-us/ef/ef6/fundamentals/working-with-dbcontext) [Passing Parameters (C# Programming Guide)](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/passing-parameters) [Constructors (C# programming guide)](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/constructors) [Generic type parameters (C# Programming Guide)](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/generics/generic-type-parameters, https://docs.microsoft.com/en-us/dotnet/csharp/fundamentals/types/generics) [Inheritance in C# and .NET](https://docs.microsoft.com/en-us/dotnet/csharp/fundamentals/tutorials/inheritance)*

*[Data Seeding](https://docs.microsoft.com/en-us/ef/core/modeling/data-seeding) [override (C# reference)](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/override) [Creating and configuring a model](https://docs.microsoft.com/en-us/ef/core/modeling/) [Server (computing)](https://en.wikipedia.org/wiki/Server_(computing)) [ASP.NET MVC Pattern](https://dotnet.microsoft.com/en-us/apps/aspnet/mvc) [Overview of ASP.NET Core MVC](https://docs.microsoft.com/en-us/aspnet/core/mvc/overview?view=aspnetcore-6.0) [Get started with ASP.NET Core MVC](https://docs.microsoft.com/en-us/aspnet/core/tutorials/first-mvc-app/start-mvc?view=aspnetcore-6.0&tabs=visual-studio) [ASP.NET Web APIs](https://dotnet.microsoft.com/en-us/apps/aspnet/apis) [REST API](https://restfulapi.net/) [Visual Studio documentation](https://docs.microsoft.com/en-us/visualstudio/windows/?view=vs-2022)*
